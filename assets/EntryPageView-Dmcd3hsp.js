import{d as F,p as r,g as V,h as A,l as P,o as u,e as R,s as S,w as D,b as s,c as n,f as a,k as y,B,t as C,r as L,F as M,v as j,_ as W}from"./index-lzizTrR5.js";import{T as f}from"./TextInput-DzyqH3TE.js";import{I as k}from"./IconButton-Bwx97DTe.js";import{P as z,R as c}from"./PhotoDragDrop-BPRvkThD.js";import{F as G}from"./FormWrapper-Bhh730Tu.js";const H={key:0,class:"image-upload"},J={key:1,class:"images-area"},K={class:"form-group"},Q={key:2,class:"error-message"},X={class:"form-group tag-input"},Y={class:"add-button-wrapper"},Z={class:"tag-list"},ee={class:"tag-label"},te=["onClick"],le={class:"form-group"},se={class:"radio-buttons"},ae={class:"radio-buttons"},oe={key:3,class:"submit-area"},ue={key:4,class:"submit-area-right"},de=F({__name:"EntryPageView",props:{title:{},tags:{},body:{},publish:{},adultsOnly:{},images:{}},emits:["submit","update:title","update:tags","update:body","update:publish","update:adultsOnly","update:images"],setup(I,{emit:h}){const d=I,i=h,N=S(),$=r(()=>!/^\/posts\/edit\/\d+$/.test(N.path)),_=r({get:()=>d.title??"",set:e=>i("update:title",e)}),T=r({get:()=>d.body??"",set:e=>i("update:body",e)}),p=r({get:()=>d.publish??"",set:e=>i("update:publish",e)}),v=r({get:()=>d.adultsOnly??"",set:e=>i("update:adultsOnly",e)}),U=r({get:()=>d.images??[],set:e=>i("update:images",e)}),g=V(""),o=V([]),m=V(""),O=e=>e?e.split(",").map(t=>t.trim()):[];A(()=>{o.value=O(d.tags??"")}),P(()=>d.tags,e=>{o.value=O(e??"")});const q=()=>{const e=g.value.trim();e&&!o.value.includes(e)&&!e.includes(",")&&!e.includes(" ")&&!e.includes("　")?(o.value.push(e),g.value="",m.value="",b()):e?o.value.includes(e)?m.value="タグが重複しています。":m.value="使用できない文字が含まれています。":m.value="タグが入力されていません。"},x=e=>{o.value.splice(e,1),b()},b=()=>{i("update:tags",o.value.join(","))},E=()=>{b(),i("submit")};return(e,t)=>(u(),R(G,null,{default:D(()=>[s("form",{onSubmit:j(E,["prevent"])},[$.value?(u(),n("div",H,[a(z,{modelValue:U.value,"onUpdate:modelValue":t[0]||(t[0]=l=>U.value=l),maxCount:10},null,8,["modelValue"])])):y("",!0),e.$slots.top?(u(),n("div",J,[B(e.$slots,"top",{},void 0,!0)])):y("",!0),t[8]||(t[8]=s("p",{class:"section-title"},"タイトル",-1)),s("div",K,[a(f,{id:"title",className:"title",name:"title",text:"タイトル",modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=l=>_.value=l),required:""},null,8,["modelValue"])]),m.value?(u(),n("div",Q,C(m.value),1)):y("",!0),t[9]||(t[9]=s("p",{class:"section-title"},"タグ",-1)),s("div",X,[a(f,{id:"tags",className:"tags",name:"tags",text:"タグ",modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=l=>g.value=l)},null,8,["modelValue"]),s("div",Y,[a(k,{label:"追加",class:"add-button",onClick:q})])]),s("div",Z,[s("ul",null,[(u(!0),n(M,null,L(o.value,(l,w)=>(u(),n("li",{key:w,class:"tag-item"},[s("span",ee,C(l),1),s("button",{class:"tag-remove",onClick:ie=>x(w)},"×",8,te)]))),128))])]),t[10]||(t[10]=s("p",{class:"section-title"},"本文",-1)),s("div",le,[a(f,{id:"body",className:"body",name:"body",type:"textarea",text:"本文",modelValue:T.value,"onUpdate:modelValue":t[3]||(t[3]=l=>T.value=l)},null,8,["modelValue"])]),t[11]||(t[11]=s("p",{class:"section-title"},"公開設定",-1)),s("div",se,[a(c,{id:"public",name:"publish",value:"0",label:"公開",modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=l=>p.value=l),required:""},null,8,["modelValue"]),a(c,{id:"private",name:"publish",value:"1",label:"非公開",modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=l=>p.value=l),required:""},null,8,["modelValue"])]),t[12]||(t[12]=s("p",{class:"section-title"},"年齢制限",-1)),s("div",ae,[a(c,{id:"allAges",name:"AdultsOnly",value:"0",label:"全年齢",modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=l=>v.value=l),required:""},null,8,["modelValue"]),a(c,{id:"adultsOnly",name:"AdultsOnly",value:"1",label:"R18",modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=l=>v.value=l),required:""},null,8,["modelValue"])]),e.$slots.bottom?(u(),n("div",oe,[B(e.$slots,"bottom",{},void 0,!0),a(k,{label:"保存",type:"submit"})])):(u(),n("div",ue,[a(k,{label:"プレビュー",type:"submit"})]))],32)]),_:3}))}}),ge=W(de,[["__scopeId","data-v-5f37f0c2"]]);export{ge as E};
