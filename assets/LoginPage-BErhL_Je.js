import{d as _,g as n,j as b,o as u,c as p,b as s,f as l,w as k,v as y,t as V,k as I,u as D,a as N,m as S,_ as h}from"./index-lzizTrR5.js";import{T as m}from"./TextInput-DzyqH3TE.js";import{I as x}from"./IconButton-Bwx97DTe.js";const C={class:"container"},T={class:"login"},j={class:"submit-login"},B={key:0,class:"error"},E=_({__name:"LoginPage",setup(P){const a=n(""),i=n(""),t=n(""),c=n(null),g=D(),e=b(),f=async()=>{try{const r=await fetch("https://yellowokapi2.sakura.ne.jp/Vue/api/LoginAPI.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loginid:a.value,password:i.value})}),o=await r.json();if(c.value=o,!r.ok)throw t.value=o.error||"Unknown error occurred",new Error(t.value);o.id?(e.id!==""&&e.logout(),e.login(o),console.log("ユニークID:",e.id),console.log("ユーザー名:",e.login_id),console.log("ユーザー名:",e.name),console.log("管理者フラグ:",e.admin),console.log("年齢制限:",e.certificate18),console.log("生年月日:",e.birthDate),console.log(o.login_id),g.push({path:`/home/${o.id}`})):t.value="IDもしくはパスワードが間違っています。"}catch(r){r instanceof Error?console.error("Error:",r.message):console.error("An unknown error occurred")}},v=()=>{f()};return(r,o)=>{const w=N("router-link");return u(),p("div",C,[s("form",{onSubmit:y(v,["prevent"])},[s("div",T,[o[2]||(o[2]=s("br",null,null,-1)),o[3]||(o[3]=s("label",{for:"loginid"},"ログインID",-1)),l(m,{id:"loginid",className:"loginid",name:"loginid",modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value=d),required:""},null,8,["modelValue"]),o[4]||(o[4]=s("label",{for:"password"},"パスワード",-1)),l(m,{id:"password",className:"password",name:"password",type:"password",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=d=>i.value=d),required:""},null,8,["modelValue"]),o[5]||(o[5]=s("br",null,null,-1))]),s("div",j,[l(w,{class:"register",to:"/register/temporary"},{default:k(()=>o[6]||(o[6]=[S("新規登録")])),_:1}),l(x,{label:"ログイン",type:"submit"})])],32),t.value?(u(),p("div",B,[s("p",null,V(t.value),1)])):I("",!0)])}}}),A=h(E,[["__scopeId","data-v-0272357f"]]);export{A as default};
