import{d as h,g as i,j as C,l as P,h as $,o as p,c as f,f as c,w as x,k as w,T as I,F as T,_ as k,b as n,t as g,s as F}from"./index-lzizTrR5.js";import{F as B}from"./FollowButton-B6b5boGQ.js";import{I as N}from"./IconButton-Bwx97DTe.js";const S=h({__name:"NotificatioButton",props:{n_id:{}},setup(d){const t=d,o=i(!1),a=i(!0),s=i(""),u=i(""),_=C();s.value=_.id??"0";const m=async()=>{try{const e=`https://yellowokapi2.sakura.ne.jp/Vue/api/FollowNotifyGetAPI.php/${u.value}`,l=await fetch(e);if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);const r=await l.json();console.log("APIレスポンス (FollowNotifyGetAPI):",r),r.success&&(o.value=Number(r.NotifyFrag)===0,console.log("最新のフォロー通知状態 (isNotify):",o.value))}catch(e){console.error("Error fetching latest notify status:",e)}};let y=!1;const b=async()=>{if(!y){y=!0;try{const e=o.value?"insert":"delete",l=`https://yellowokapi2.sakura.ne.jp/Vue/api/NotifyToggleAPI.php/${u.value}/${e}`,r=await fetch(l);if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const v=await r.json();v.success?await m():console.error("エラー: "+JSON.stringify(v))}catch(e){console.error("Error posting data:",e)}finally{y=!1}}};return P(()=>t.n_id,async e=>{typeof e=="number"&&e>0&&s.value!==""&&(u.value=`${s.value}/${e}`,await m())},{immediate:!0}),$(async()=>{t.n_id>0&&s.value!==""&&(u.value=`${s.value}/${t.n_id}`,await m(),a.value=!1)}),(e,l)=>(p(),f("div",null,[c(N,{label:o.value?"通知オン":"通知オフ",iconClass:o.value?"fa-solid fa-bell":"fa-solid fa-bell-slash",backgroundColor:o.value?"secondary":"primary",onClick:b},null,8,["label","iconClass","backgroundColor"])]))}}),j={key:0,class:"toast-popup"},E=h({__name:"LinkCopy",setup(d){const t=i(!1),o=async()=>{try{await navigator.clipboard.writeText(window.location.href),t.value=!0,setTimeout(()=>{t.value=!1},2e3)}catch(a){console.error("コピーに失敗しました: ",a)}};return(a,s)=>(p(),f(T,null,[c(N,{label:"",iconClass:"fa-regular fa-copy",backgroundColor:"primary",textColor:"white",onClick:o}),c(I,{name:"slide-fade"},{default:x(()=>[t.value?(p(),f("div",j,"コピーしました！")):w("",!0)]),_:1})],64))}}),A=k(E,[["__scopeId","data-v-088c95ee"]]),V={class:"profile-container"},J=["src"],L={class:"profile-info"},U={class:"profile-actions"},D={key:0},G=h({__name:"PostProfile",props:{profile_photo:{},profile_name:{},profile_login_id:{}},setup(d){var s;const t=F(),o=i(((s=t.params.id)==null?void 0:s[0])??null),a=d;return(u,_)=>(p(),f("div",V,[n("img",{src:`http://yellowokapi2.sakura.ne.jp/Blog/index${a.profile_photo}`,alt:"プロフィール画像",class:"profile-photo"},null,8,J),n("div",L,[n("h2",null,g(a.profile_name),1),n("p",null,"ID: "+g(a.profile_login_id),1),_[0]||(_[0]=n("p",null,"mailaddress@example.com",-1))]),n("div",U,[c(S,{n_id:o.value?Number(o.value):0},null,8,["n_id"]),o.value?(p(),f("span",D,[c(B,{f_id:o.value?Number(o.value):0},null,8,["f_id"])])):w("",!0),c(A)])]))}}),R=k(G,[["__scopeId","data-v-6bf6adb2"]]);export{R as P};
