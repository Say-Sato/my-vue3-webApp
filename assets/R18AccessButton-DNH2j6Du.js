import{d as g,g as d,o as i,e as f,M as C,j as _,u as v,p as M,c as A,b as h,z as u,k as b,G as k,_ as B}from"./index-B9vTfeto.js";const x="年齢制限のある画像を表示しますか？",R=g({__name:"Certificate18Modal",emits:["confirm","cancel"],setup(n,{emit:a}){const s=d(!0),e=a,t=()=>{e("confirm")},o=()=>{e("cancel")};return(r,l)=>(i(),f(C,{message:x,confirmText:"表示する",cancelText:"戻る",isVisible:s.value,onConfirm:t,onCancel:o},null,8,["isVisible"]))}});function w(){const n=s=>{if(!s||s.trim()==="")return null;const e=new Date(s);if(isNaN(e.getTime()))return null;const t=new Date;let o=t.getFullYear()-e.getFullYear();return t.getMonth()>e.getMonth()||t.getMonth()===e.getMonth()&&t.getDate()>=e.getDate()||o--,o};return{calcAge:n,isAdult:s=>{const e=n(s);return e===null?!1:e>=18}}}function y(){const n=_(),a=v(),{isAdult:s}=w(),e=d(!1),t=d(null),o=M(()=>n.birthDate?s(n.birthDate):!1),r=c=>{o.value?a.push({path:`/posts/${c}`}):n.birthDate?alert("このコンテンツは20歳以上の方限定です。年齢条件を満たしていない場合は閲覧できません。"):alert("生年月日が未入力です。")},l=c=>{t.value=c,n.certificate18?a.push({path:`/posts/${c}`}):e.value=!0},m=()=>{t.value!==null&&r(t.value),p()},p=()=>{e.value=!1,t.value=null};return{showModal:e,isAgeVerified:o,showR18Modal:l,handleConfirm:m,handleClose:p}}const D=g({__name:"R18AccessButton",props:{postId:{}},setup(n){const a=n,{showModal:s,showR18Modal:e,handleConfirm:t,handleClose:o}=y();return(r,l)=>(i(),A("div",null,[h("div",{class:"blur-overlay",onClick:l[0]||(l[0]=m=>u(e)(a.postId))},l[1]||(l[1]=[h("span",{class:"blur-text"},"閲覧注意",-1)])),(i(),f(k,{to:"body"},[u(s)?(i(),f(R,{key:0,onConfirm:u(t),onCancel:u(o)},null,8,["onConfirm","onCancel"])):b("",!0)]))]))}}),N=B(D,[["__scopeId","data-v-e4fd1787"]]);export{N as R};
